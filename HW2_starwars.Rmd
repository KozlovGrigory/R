---
title: "Визуализация персонажей Звездных войн"
author: "Mine Çetinkaya-Rundel translated by Basil Yakimov"
output: md_document
---
```{r load-packages, include=FALSE}
library(tidyverse)
```

### Взглянем на фрейм starwars.

```{r glimpse-starwars}
glimpse(starwars)
```

### Модифицируйте следующий график для замены цвета всех точек на розовый (`"pink"`).

```{r scatterplot}
ggplot(starwars, 
       aes(x = height, y = mass, color = gender, size = birth_year)) +
  geom_point(color = "pink")
```

### Добавьте заголовок и подписи к осям и легенде. Раскомментируйте строчки, чтобы увидеть результат.

```{r scatterplot-labels}
ggplot(starwars, 
       aes(x = height, y = mass, color = gender, size = birth_year)) +
  geom_point(color = "pink") +
  labs(
    title = 'Зависимость роста от веса у персонажей вселенной "Звездных войн"',
    x = "Рост, см", 
    y = "Вес, кг",
    )
```

### Выберите одну категориальную переменную из набора данных и постройте столбчатый график ее распределения.

(Небольшой фрагмент стартового кода представлен ниже и этот фрагмент кода не будет исполняться (настройка `eval = FALSE`), поскольку имеющийся код синтаксически некорректен и не может быть исполнен, что заблокирует весь документ.
Когда вы дополните этот код, замените настройку фрагмента на `eval = TRUE` либо вообще удалите опцию `eval`).

```{r barplot, eval = TRUE}
ggplot(starwars, aes(y = homeworld)) +
  geom_bar()
```

### Выберите одну числовую переменную из набора данных и постройте гистограмму ее распределения.

(На сей раз стартового фрагмента кода нет, работайте самостоятельно!)

```{r histogram}
ggplot(starwars, aes(x = height)) + geom_histogram() +
  labs(x = "Рост, см",
      y = "Частота",
      title = 'Зависимость роста от веса у персонажей вселенной "Звездных войн"'
  )
```

### Выберите числовую и категориальную переменные и создайте визуализацию (вы сами выбираете тип!) отношения между этими переменными. Помимо вашего кода и результата, изложите интерпретацию вашей визуализации.

```{r num-cat}
ggplot(starwars, aes(x = species, y = height)) +
  geom_point(alpha = 0.5, color = 'darkgreen') + theme(axis.text.x = element_text(angle=90, hjust=1)) + labs(
    x = "Вид",
    y = "Рост, см",
    title = 'Зависимость роста от расы у персонажей вселенной "Звездных войн"'
  )
```

Наименьшим ростом среди персонажей "Звездных войн" обладают представители вида Йоды (Yoda's species), наибольшим - квермиане (Quermian). Рост расы людей в этой вселенной колеблется приблизительно от 150 до 200 см.

### Выберите две категориальные переменные и создайте визуализацию отношения между этими переменными. Помимо вашего кода и результата, изложите интерпретацию вашей визуализации.

```{r cat-cat}
ggplot(starwars, aes(x = homeworld, 
                  fill = species)) + theme(axis.text.x = element_text(angle=90, hjust=1)) + geom_bar() + labs(
    x = "Планета",
    y = "Расы",
    title = 'Представленность рас на разных планетах во вселенной "Звездных войн"'
  )
```

Наибольшим разнообразием характеризуются планеты Набу (Naboo), Татуин (Tatooine), Корусант (Coruscant) и Камино (Camino). На остальных планетах представлено по одной расе персонажей.

### Выберите две числовые и две категориальные переменные и создайте визуализацию, которая включает все эти переменные. Изложите интерпретацию вашей визуализации.

```{r multi}
ggplot(data = starwars, mapping = aes(x = height, y = mass,
                     colour = homeworld,
                     shape = sex)) +
  geom_point() +
  labs(x = "Рост, см", y = "Масса, кг")
```

Подавляющее большинство персонажей весит до 250 кг и имеет рост до 250 см. Наиболее высокие персонажи обитают на Камино (Camino) и Кашиике (Kashyyyk), персонаж с наибольшим весом - на Нал Хатте (Nal Hatta). Большинство персонажей имеют разделение по половому признаку, гермафродитом является единственный персонаж с Нал Хатты (Nal Hatta), бесполые персонажи обитают на Муунилисте (Muunilist) и Трандоше (Trandosha).